---

# SECURITY BY CURIOSITY
Graduate Program 2023
```
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣀⣤⣄⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣠⠶⠛⠉⠀⠀⠀⠀⠉⠙⠶⠦⣀⡀⠀⠀⠀⣀⣠⠴⠶⠞⠛⠛⠶⠤⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡴⠛⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠙⠲⣞⠋⠁⠀⠀⠀⠀⠀⠀⠀⠀⠈⢳⡄⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⠞⠁⠀⠀⠀⠀⠀⣀⣠⡤⠤⠤⠤⣤⣄⡀⠀⠀⠹⣆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢳⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⣴⠃⠀⠀⠀⠀⢠⠶⠛⠉⠁⠀⠀⠀⠀⠀⠈⠙⠓⠦⢤⣿⠤⠖⠒⠒⠒⠒⠒⠚⠒⠓⠲⠾⢧⡀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⣰⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣀⣤⡤⠤⠤⠤⠤⣭⣳⣤⡀⠀⠀⠀⢀⣀⣀⣠⣤⣤⣤⣬⣙⣳⣦⣄⠀⠀
⠀⠀⠀⠀⢀⣀⣿⣷⣦⣤⣄⣀⡀⠀⣀⣀⣤⣤⣤⣶⣯⣭⣥⣶⣶⣯⣭⣽⣶⣶⣬⣭⣙⣴⢖⣫⣭⣿⣿⣶⣶⣶⣶⣶⣾⣿⣿⣿⣷⣤
⠀⠀⠀⣤⠛⢹⡇⠈⠉⠙⠻⠿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⣿⡿⣿⣿⣿⣿
⠀⢀⡞⠁⠀⠸⠇⠀⠀⠀⠀⠀⠘⣿⣿⣿⣿⣿⣿⣽⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡣⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⣿⣿⣿
⢀⡾⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡁⢹⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿
⡞⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠹⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⣿⣿⣿⣿⣿⣿⡿⠛⠉⠉⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠻⠿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠟⠁⠀⠀⣀⠀⠙⠿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠿
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠉⠉⣉⣩⡭⠿⠛⠉⠁⠀⠀⠀⠀⠀⠙⠛⢿⡒⠛⠛⠛⠋⠻⡭⡉⠁⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣀⣀⠀⠀⠀⠀⠀⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠁⠀⠀⠀⠀⠀⠀⠹⣦⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⡾⠛⠉⠉⠉⠳⣦⣄⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⡄⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⠀⠀⢀⣀⠀⠀⠀⠉⠙⠳⠦⣤⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣠⣇⡀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢷⡄⠀⠈⠉⠛⠢⢤⣤⣀⠀⠀⠈⠉⠉⠑⠒⠒⠒⠢⠤⢤⣤⣤⣤⣤⣄⣠⣤⣤⡤⠔⠚⠋⠁⢀⡇⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠛⢦⣄⡀⠀⠀⠀⠈⠉⠙⠓⠒⠦⢦⣤⣤⣄⣀⣀⣀⣀⣀⣀⠀⠀⠈⠁⠀⢀⣀⣀⣠⣤⠖⠉⠀⠀
⠛⣻⣶⣦⣤⣄⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠛⠲⢤⣤⣀⣀⠀⠀⠀⠀⠀⠀⠁⠀⠈⠀⠉⠀⠉⠉⠉⠉⠉⣉⣉⣤⣥⣷⠾⠓⢲⣚⡟
⠈⣞⣷⣴⣌⣽⣫⣿⠷⣤⣄⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠙⠛⠛⠛⠛⠛⠷⠶⠶⠶⠶⢶⢦⣤⣤⣴⢿⣯⡉⠉⣁⣞⠗⢂⠹⡝⠅
⠀⣻⣿⣷⢪⣿⣋⠀⠀⢀⡈⣽⡛⣿⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⡟⣛⣍⣿⢷⡆⣈⣻⣮⠀⣻⣧⢿⣷⣶⠾
⠿⣿⣿⠾⠿⣿⡿⣵⣿⡏⣿⠹⣿⣞⢷⣄⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣀⣴⠟⡾⣿⣹⣿⣿⢷⡽⣏⠛⠓⠒⠛⠛⠛⠛⠛
⡼⢭⠥⣴⠬⣿⠿⢯⡿⢥⡿⢧⡿⢿⡿⢯⠭⢭⡿⢿⡿⢿⡿⢶⡶⢶⡾⢾⡿⢿⡭⢿⣿⠼⣧⠍⣭⠭⣥⠬⣷⢻⣆⣀⣦⣀⣴⣀⣀⠀
⢱⡿⠶⠿⠶⠾⠶⠾⠶⠾⠷⠾⠶⠾⠷⠾⠶⠾⠷⠾⠷⠾⠷⠾⠷⠾⠟⠛⠻⠞⠛⠛⠛⠛⠛⠛⠛⠋⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⢹⡀
⢸⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⡇
```
---

```
~~~chafa img/whitehat-hacker.jpg
doge-hacker
~~~
```
Whitehat, show them the video.


---

# Security: A Game of Resources

- Security is sometimes sold through fear.
- This tends to lead to poor decision making
- To make good decision we need to conserve our resources
- Example: External scan vs Internal scan
```
.---------------------------------.           
|  .---------------------------.  |           
|[]|                           |[]|           
|  |                           |  |           
|  |                           |  |           
|  |                           |  |           
|  |                           |  |           
|  |                           |  |           
|  |                           |  |           
|  |                           |  |           
|  |                           |  |           
|  `---------------------------'  |           
|      __________________ _____   |           
|     |   ___            |     |  |           
|     |  |   |           |     |  |           
|     |  |   |           |     |  |           
|     |  |   |           |     |  |           
|     |  |___|           |     |  |           
\_____|__________________|_____|__|
```
---

# Who is this course for?

- Anyone who is just getting starded in Tech industry
- If you want to learn about CyberSecurity from an Attacker’s perspective
- If you want to know what a cyber attack looks like in practice
- If you want to get hands dirty and try some hacking techniques on each other
- Get Hands on experience with Phishing / Command & Control / Network Pivoting


```
~~~graph-easy --as=boxart
[ It's ] - too -> [ easy ]
~~~
```

```       .------..
     -          -
   /              \
 /                   \
/    .--._    .---.   |
|  /      -__-     \   |
| |                 |  |
 ||     ._   _.      ||
 ||      o   o       ||
 ||      _  |_      ||
 C|     (o\_/o)     |O     Uhhh, this computer
  \      _____      /       is like, busted or
    \ ( /#####\ ) /       something. So go away.
     \  `====='  /
      \  -___-  /
       |       |
       /-_____-\
     /           \
   /               \
  /__|  AC / DC  |__\
  | ||           |\ \
```
---

# Goal of Today
- At the end of today we will have walked through the some typical stages of a cyber-attack. 
- You will have been shown hands on exercises for conducting a cyber-attack
- You will have learned how easy it is to be on the attack side.
- You will NOT learn directly how to defend against these attacks.
- Instead, we will focus on methodology for conducting attacks
- This mindset is much more valuable to establish than focusing on defense

> ![NOTE] 
> remember attacker has the advantage!
```
================================================.
     .-.   .-.     .--.       GOAL              |
    | OO| | OO|   / _.-' .-.   .-.  .-.   .''.  |
    |   | |   |   \  '-. '-'   '-'  '-'   '..'  |
    '^^^' '^^^'    '--'                         |
===============.  .-.  .================.  .-.  |
               | |   | |                |  '-'  |
               | |   | |                |       |
               | ':-:' |                |  .-.  |
               |  '-'  |                |  '-'  |
==============='       '================'       |
```
---

# $ whoami
Alexander Reinthal
35y
- Former Cyber Security Analyst
- Current Data Engineer / Data Scientist
- Father / Sambo
- Tech lover
- Musician
- Gamer

---
# Outline
- Talkthrough of Attack Scenario: Zeegma Corporate Espionage
- Cyber Kill Chain
- Exercise I: Sending & Clicking on Phishing Emails 🎣
- Exercise II: Infecting Ourselves with malware 🤣 🦟
- Exercise III: Local Network Attacks & Other lulz (If enough time)
- Talkthrough: Selling Initial Access & Shodan 🏆 💸
- Digging deeper: Network Pivoting & Beyond ⛰️
- Summary 🧮

---
# Background on Cyber Kill Chain 
- The kill chain was originally developed by US government contractor Lockheed Martin in 2010ish
- It models how cyber attacks are conducted
- Can be a good mental model, not very useful in practice
- Today, other frameworks exists like MITRE-attack framework an the unified kill chain.

---
# Cyber Kill Chain 

1. Reconnaissence 🔎
2. Weaponisation 🗡️, use info from recon to attack
3. Delivery 🚚, engage target 
4. Exploitation 😈, use weakness
5. Installation 💾, install malware
6. Command & Control 🕹️, use compromised targets to further goals & objectives
7. Actions on Objectives 🎯, get the info

---
# A Lightweight Cyber Kill Chain

Today we will do something like this
```
~~~graph-easy --as=boxart
[Recon1:Get knowit emails] - delivery -> [ Phish Targets ]
[ Phish Targets ] - login to o365 -> [ Recon2: Get CRM Users ]
[ Recon2: Get CRM Users ] - delivery -> [ Phish Targets ]
[ Phish Targets ] - login to CRM -> [ Primary Objective: Extract Data from CRM]
~~~
```
- Above kill chain is more similar to the unified kill chain
- Typically, attackers spend most time in the Recon phase

---


# Attack Scenario: Zeegma Corporate espionage against Knowit Solutions Cocreate

- You are cyber mercenaries who have been contracted to perform 
corporate espionage against Knowit Solutions Cocreate.
- Your employer, Zeegma, has been falling behind its competitor Cocreate
- Zeegma is desperate to know why all its customers have left to Knowit Solutions Cocreate. 


---



# Hacking Objectives: Zeegma Corporate espionage against Knowit Solutions Cocreate

Here are your objectives

## **Primary Objective** 
is to compromise Cocreate's customer relationship management platform (CRM) by hacking users o365 accounts.
Using hacked accounts, you will relay customer relations information to Zeegma, and brief them on your findings.

## **Secondary Objective** 

is to establish persistance inside Cocreate's environment so that the Zeegma can repeatedly extract business intelligence from the victim.

### What is persistance?

Persistance is typically a backdoor into an IT system. In general, it is any mechanism that let's the adversary to keep its foothold in the target organisation, be it a backdoor rogue Office 365 account, a remote access trojan or similar.

---

# Action Plan (1/3): Primary Objective, The CRM System
```
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⢋⣠⣼⣿⣿⣦⠻⣿⣿⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠟⣴⣿⣿⣿⣿⣿⣿⣧⠹⣿⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡟⣁⡤⣭⣿⣿⣿⣿⣿⣿⣿⡇⢹⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠀⠉⠻⢷⣬⡻⣟⢿⣿⣿⣿⠻⠈⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠀⠈⣿⣷⣎⢻⣮⠳⣹⣿⣿⢣⡄⣿⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⠀⢀⣌⢹⣯⡀⠹⣷⡀⣿⣿⢸⣧⢹⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡀⠀⠈⢸⣿⣿⣷⡹⣷⣹⡇⣿⣿⡜⣿⣿⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣧⠀⠀⠀⠘⣿⣿⣷⡽⣿⢸⣿⣿⡗⣬⠻⣿⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠇⠀⠀⠀⠙⠛⣩⢰⢇⣿⠿⢋⣴⣿⣷⣝⢿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡟⠁⣾⠆⠀⠀⠀⠈⠁⣂⣩⣵⡆⠿⣻⣿⣿⣿⣷⡜⢿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢠⠸⠏⡔⡄⡶⣶⣿⠀⢹⣿⣿⢇⢰⣿⣿⣿⣿⣿⣿⡸
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡗⢸⢸⣷⡇⡇⡇⣿⣿⢸⢸⣿⣿⣾⣄⢻⢟⣽⣿⣿⣿⣧
⡛⠻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡟⣤⣬⢸⣿⣇⢹⡇⣿⡟⠀⣿⣿⣿⣿⠏⠀⠊⢹⣿⣿⣿⣿
⣷⡄⠈⠙⠿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠟⢀⠙⠿⢸⣿⡘⢸⣿⣿⡅⢠⣿⣿⣿⡏⣶⠏⣠⣵⠟⣽⣿⢇
⣿⣿⡄⠀⠀⠈⠙⠿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠟⡘⢦⣅⣀⢸⣿⣧⣸⣿⣿⡇⠘⣿⣿⡟⣼⠁⠳⣶⣖⣒⣲⠶⢸
⣿⣿⣿⣄⠀⠀⠀⠀⠀⠙⠿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠟⠡⠴⣿⣷⣿⢌⠘⣿⣿⣿⣿⣿⡇⢰⣿⣿⢡⡏⣶⣶⣶⣶⣶⣬⡄⣼
⣿⣿⣿⣿⣆⠀⠀⠀⠀⠀⠀⠈⢻⣿⣿⡿⠿⣟⣛⠛⠛⣛⣡⣬⡟⣷⢹⣿⡜⠇⠁⣹⣿⣿⣿⣿⣿⡿⠿⢃⣾⢀⣷⠶⠶⠭⢭⣝⢃⣿
⣿⣿⣿⣿⣿⣧⠀⠀⠀⠀⠀⠀⠀⠱⠂⠉⠛⢉⡴⠛⣼⠟⢙⡿⢃⡙⠁⢛⣥⠠⠾⠿⠿⠿⠿⣿⠿⠷⠿⠟⠁⠺⣿⣮⣽⣛⣳⠖⢸⣿
⣿⣿⣿⣿⣿⣿⣧⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢾⠅⡾⠡⠶⢋⣠⢿⣿⣿⣿⣾⣇⢺⣿⣷⡈⣷⣰⣦⣿⡆⢤⣿⡶⣿⣿⣿⠿⠿⠃⢸⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣷⣄⠀⠀⠀⠀⠀⠀⠀⠀⠂⠀⢠⡞⣩⠞⢋⣽⠿⠿⠿⠏⠾⠿⠿⠇⣿⣿⣿⣿⣷⣾⣿⣿⣷⣿⠟⣣⣴⠟⣾⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣦⡀⠀⠀⠀⢠⡀⠀⠀⠈⢠⡴⠚⠩⠶⣿⣷⡾⢿⣛⣥⣀⠈⢙⡿⠟⠿⣝⠻⠿⢟⣫⣴⣾⣿⠃⣼⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣄⠀⠀⢻⣷⣄⠀⠀⡀⠤⠖⣛⣭⣶⣾⣿⣿⣿⣿⣿⣶⣭⡛⢿⣶⣾⣿⣿⣿⣿⣿⡿⢀⣿⣿⣿
⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣦⡀⠛⠛⣋⣠⣴⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣮⣛⣿⣿⣿⣿⣿⡖⣸⣿⣿⣿
```
### Reconnaissence 1
-  Find some email addresses of Cocreate

### Phish the Target
-  Send targeted phishing emails

### Initial Foothold
-  Login to o365 using compromised 2fa tokens

### Reconnaissence 2

-  Search emails, teams and other instant messages for references to the CRM system

---
# Action Plan (2/3): Primary Objective, The CRM System

Here what we will do to acheive the primary objective:

## Weaponization

- Figure who is uses the CRM system from the info collected.

## Phish the CRM Users
- Send more phishing emails, targeting users of the CRM system this time, get the login and password.
## Execute on Primary Objective
- Login to the CRM system and extract the necessary data.

---

# Action Plan (3/3): Secondary Objective, Establish Persistance

## Recon 3 & Weaponization

- Figure out who is domain admin in invativas active directory

## Exploitation

- Phish the domain administrators

## Execute on Secondary Objective

- Create a backdoor o365 account
